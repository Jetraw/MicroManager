# Jetraw Micro-Manager, the Jetraw and Dpcore plug-ins for Micro-Manager. 
This is the public repository for **Jetraw and DPcore plug-ins** compatible with Micro-Manager. With both plug-ins the user is able to **Dpcore prepare the acquired images** and then optionally the user can **compress the images using Jetraw** within Micro-Manager.  
<br/>For more info visit:
https://www.jetraw.com/

## Requirements
- **Jetraw installed** on a Windows computer (MacOS and Linux coming soon) and installation folder must be in PATH environment variable.<br/>
*Note:* if you do not have Jetraw installed visit https://www.jetraw.com/downloads/software and for usage information https://github.com/Jetraw/Jetraw
- **Micro-Manager 2.0 installed** for Windows 64 bits.<br/>
*Note:* if you do not have Micro-Manager installed visit https://micro-manager.org/wiki/Download%20Micro-Manager_Latest%20Release
- For writing compressed files a **valid License** is needed. 

At the moment these plug-ins only **support Hamamatsu cameras**. If you want to integrate/calibrate any other type of camera please contact us. 

**PCO cameras** can use the PCO Generic Adapter that is provided within the **Micro-Manager 1.4**. PCO has already integrated the Dpcore plug-in module into its software, therefore if Micro-Manager detects a valid Jetraw installation the user will be able to Dpcore prepare the acquired image. For more information contact PCO or directly explore the source code available at:  
https://github.com/micro-manager/micro-manager/tree/svn-mirror/DeviceAdapters/PCO_Generic

## Installation
You will need the following JAR files for installation:

- MMJ_ jar file [latest (pre-)release](https://github.com/Jetraw/MicroManager/releases/download/21.07.01.1/MMJ_21.07.01.1.jar)
- DpcorePlugin jar file [latest (pre-)release](https://github.com/Jetraw/MicroManager/releases/download/21.07.01.1/DpcorePlugin_21.07.01.1.jar)
- JetrawSaverPlugin jar file [latest (pre-)release](https://github.com/Jetraw/MicroManager/releases/download/21.07.01.1/JetrawSaverPlugin_21.07.01.1.jar)
  
If you need a previous version please go to [previous versions.](https://github.com/Jetraw/MicroManager/releases/

**Replace MMJ_.jar** in your MicroManager folder:
path_to_micromanager\plugins\Micro-Manager\

**Copy/replace your .jar plug-ins files** (DpcorePlugin.jar and JetrawSaverPlugin.jar) into:
path_to_micromanager\mmplugins\

## Usage
Once all .jar files have been replaced/copied, you should be able to Dpcore prepare an acquired image and save a Jetraw compressed version of it during acquisition.
In MicroManager you will need to add the following processes using the **plug-in section *On-the-fly Image Processing***.<br/>
  
**Select** Dpcore Plug-in and Jetraw Saver in this order **(IMPORTANT order matters).**

Your pipeline configuration should look as follows:

![alt text](https://github.com/Jetraw/MicroManager/blob/master/screenshots/pipeline_configuration.png)

*Micro-Manager pipeline configuration*

In the configuration section of Jetraw Saver Plug-in you can **choose the output folder** for your compressed images.

![alt text](https://github.com/Jetraw/MicroManager/blob/master/screenshots/jetraw_saver_plugin.png)

*Jetraw saver plug-in configuration*

Then you are **ready to do an acquisition** which prepares the images and saves a compressed copy of it. To proceed with the acquisition please **press the icon "Multi-D Acq."** in the main Micro-Manager panel.  
  
**IMPORTANT:** remember that while having Jetraw compression active the **Live and Snap options** will not work properly as a compressed image is not displayable, therefore **if you want preview your camera the Jetraw Saver Plugin must be removed from the pipeline.** The development team is already exploring alternatives to remove this limitation. 

![alt text](https://github.com/Jetraw/MicroManager/blob/master/screenshots/acquisition_screen.png)

*Acquisition of 40 frames, 20 time points and 2 slices*

**After the acquisition** is performed if you have used the Jetraw Saver Plug-in, a Jetraw compressed TIFF file will be located at the folder you previously indicated. You have two options to **display this compressed image:**

- Decompress the image using Jetraw's UI or command line tool, and display the decompressed image using ImageJ/Fiji or MicroManager, all options are capable of reading the dimensional and time coordinates generated by the acquisition.

- Display directly the compressed image using Jetraw's Native Fiji Plug-in or Jetraw's Bio-Formats Plug-in. The Fiji Native plug-in does not have the option to read the different dimensional and time coordinates from MicroManagerâ€™s acquisition at the moment, it just displays the whole amount of frames from the TIFF file. You can find the plug-ins in our website: https://www.jetraw.com/downloads/software

## Contact
Feel free to use the [issues section](https://github.com/Jetraw/MicroManager/issues) to report bugs or request new features. You can also ask questions and give comments by visiting the [discussions](https://github.com/Jetraw/MicroManager/discussions), or following the contact information at https://jetraw.com.
